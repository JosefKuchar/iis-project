{{ define "page-events" }} {{ template "header" }}
<h1 class="text-3xl text-center m-10">Ud√°losti</h1>
<div hx-get="/user" hx-trigger="load" class="my-5"></div>

<div class="grid grid-cols-1">
  <div class="form-control w-full max-w-xs my-5">
    <label class="label">
      <span class="label-text">Search</span>
    </label>
    <input
      type="text"
      class="input input-bordered w-full max-w-xs"
      name="slug"
      id="slug"
      hx-trigger="keyup changed delay:500ms"
      hx-post="/events/search"
      hx-target="#eventList"
    />
  </div>

  <div class="form-control w-full max-w-xs my-5">
    <label class="label cursor-pointer">
      <span class="label-text">Show only my events</span>
      <input
        type="checkbox"
        class="checkbox checkbox-primary"
        name="myEvents"
        hx-post="/events/get_user"
        hx-target="#eventList"
      />
    </label>
  </div>
</div>

<div id="eventList" hx-target="this">{{ template "event-list" .}}</div>

{{ template "footer" }} {{ end }} {{ define "event-list"}}
<div class="grid grid-cols-4 gap-10">
  {{ range . }}
  <a
    href="/events/{{ .ID }}"
    class="card bg-base-200 hover:opacity-80 hover:cursor-pointer"
  >
    <figure>
      <img src="https://picsum.photos/seed/{{ .ID }}/500/200" />
    </figure>
    <div class="card-body">
      <h2 class="card-title">
        <span class="text-xl text-secondary">#{{ .ID }}</span> {{ .Name }}
      </h2>
      <div class="flex items-center">
        <i class="las la-map-marker-alt"></i>
        <div class="ml-1">{{ .Location.Name }}</div>
      </div>
      {{ .Start.Format "2. 1. 15:04" }} - {{ .End.Format "15:04" }}
      <div class="flex">
        {{ range .Categories }}
        <div class="badge badge-primary mr-2 p-3">{{ .Name }}</div>
        {{ end }}
      </div>
    </div>
  </a>
  {{ end}}
</div>
{{ end }}
